# CutiePi

Here you can find all the projects I did or am currently working on with my little Raspberry Pi 2B+, aka "CutiePi"!
I am currently running most of them as Docker Containers, this page will be dedicated to the bare metal installs.

## Operating System & Troubleshooting
I use Raspberry Pi OS Lite, a Debian ARM based distro and the official OS from the Raspberry Pi Foundation.
I used to have DietPi OS installed, but ran into problems after the Debian Bookworm release. I couldn´t boot my Pi anymore, so I put the SD card into my laptop
and mounted it as a new directory. (`mkdir /mnt/pi` and `sudo mnt /mnt/pi`).
Then I installed Raspberry Pi OS on the SD card and copied all my config files to it. 
To clean up on my laptop I used the `sudo umount /mnt/pi` and `sudo rm -rf /mnt/pi` commands.

## DNS
### PiHole
I use PiHole as a DNS-based blocker from ads and malicious sites/tracking sites.
I configured my Pi as local DNS Server on my router, so all new clients in my network automatically use it.
### Unbound DNS
I use Unbound as a recursive DNS Server. 
I followed the installation instructions from here: https://docs.pi-hole.net/guides/dns/unbound/
### DNSSEC
I enabled the following security options in `/etc/unbound/unbound.conf.d/`:
```
server:
    harden-below-nxdomain: yes
    harden-referral-path: yes
    harden-algo-downgrade: no
    use-caps-for-id: no
    hide-identity: yes
    hide-version: yes
```
To generate DNSSEC keys, run `sudo unbound-control-setup`, then restart unbound with `sudo systemctl restart unbound.service`.
Using `dig +dnssec A www.dnssec.cz` you can test if DNSSEC works. The result should contain the `ad` parameter.

## VPN Server
I used PiVPN to turn my Pi into a VPN Server with Wireguard protocol. Now I can establish a secure connection into my home network at any time.
After the inital installation, clients can be added with `pivpn -a`. I added my phone and laptop as a client.
I downloaded the Wireguard App on my phone, then generated a QR code with `pivpn -qr` to establish the VPN tunnel.
For my laptop, I copied the .conf file generated by PiVPN to my Laptop using secure copy:
`scp lily@cutiepi:configs/laptop.conf ~/pivpn`.
I changed the Wireguard default port, as some networks block default VPN ports. Make sure to do this before generating the configs files.
Also make sure to enable port forwarding for Pi on your router, so the port is accessible from outside the local network.

### DynDNS
As my ISP changes my public IP address, I need a dynamic DNS client to make sure I can always reach my VPN Server.
I registered with "NoIp" for a DynDNS Service and installed their DynDNS client software on my Pi.
I added the cronjob `@reboot /usr/local/bin/noip2` to my crontab to make it automatically starts on reboot.

## Syncthing
I use Syncthing to sync files from my Pi to my Laptop, which is especially handy via VPN.
I installed Syncthing on my Pi and my Laptop. I could then access Syncthing on my Laptop browser via `http://localhost:8384/`.
Then I configured a folder to sync with my Pi and tried to sync the devices with the "Add device" button.
As my Pi is headless, I thought I could simply add it via Device ID (I looked at `man synthing`, and you can display it with `syncthing --device-id`).
But it didn´t work, the logs said connection was refused by my Pi.
I then set a GUI for my Pi´s Syncthing with `syncthing --gui-address=192.168.10.53:8384` and configured the rest from here.
I needed to change the default user and password on both Syncthing instances in order to sync them.

## Pi HATs and LED Matrix
## SSH Settings