
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../proxmox/">
      
      
        <link rel="next" href="../CutiePi/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>File Sharing - Lily's Tech Blog</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#file-sharing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Lily&#39;s Tech Blog" class="md-header__button md-logo" aria-label="Lily's Tech Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lily's Tech Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              File Sharing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Docker/" class="md-tabs__link">
        
  
  
    
  
  Docker Containers

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../scripts/" class="md-tabs__link">
        
  
  
    
  
  Automation

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../proxmox/" class="md-tabs__link">
        
  
  
    
  
  Proxmox VE

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  File Sharing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../CutiePi/" class="md-tabs__link">
        
  
  
    
  
  Raspberry Pi

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Backup/" class="md-tabs__link">
        
  
  
    
  
  Backup

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../miscellaneous/" class="md-tabs__link">
        
  
  
    
  
  Miscellaneous

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Lily&#39;s Tech Blog" class="md-nav__button md-logo" aria-label="Lily's Tech Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Lily's Tech Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Containers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../proxmox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxmox VE
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    File Sharing
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    File Sharing
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-attached-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Network Attached Storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparations" class="md-nav__link">
    <span class="md-ellipsis">
      Preparations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smb-share-setup" class="md-nav__link">
    <span class="md-ellipsis">
      SMB Share Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iscsi-lun-setup" class="md-nav__link">
    <span class="md-ellipsis">
      iSCSI LUN Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iSCSI LUN Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-iscsi-image" class="md-nav__link">
    <span class="md-ellipsis">
      Create an iSCSI image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-iscsi-target" class="md-nav__link">
    <span class="md-ellipsis">
      Create an iSCSI Target
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-initiator" class="md-nav__link">
    <span class="md-ellipsis">
      On the initiator:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#samba" class="md-nav__link">
    <span class="md-ellipsis">
      Samba
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Samba">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-logical-volume-for-the-samba-file-share" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a logical volume for the Samba file share
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-share-from-windows-devices" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the share from Windows devices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CutiePi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raspberry Pi
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../miscellaneous/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-attached-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Network Attached Storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparations" class="md-nav__link">
    <span class="md-ellipsis">
      Preparations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smb-share-setup" class="md-nav__link">
    <span class="md-ellipsis">
      SMB Share Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iscsi-lun-setup" class="md-nav__link">
    <span class="md-ellipsis">
      iSCSI LUN Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iSCSI LUN Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-an-iscsi-image" class="md-nav__link">
    <span class="md-ellipsis">
      Create an iSCSI image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-iscsi-target" class="md-nav__link">
    <span class="md-ellipsis">
      Create an iSCSI Target
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-initiator" class="md-nav__link">
    <span class="md-ellipsis">
      On the initiator:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#samba" class="md-nav__link">
    <span class="md-ellipsis">
      Samba
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Samba">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-logical-volume-for-the-samba-file-share" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a logical volume for the Samba file share
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-to-the-share-from-windows-devices" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the share from Windows devices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="file-sharing">File Sharing</h1>
<h2 id="network-attached-storage">Network Attached Storage</h2>
<p>I used Openmediavualt (OMV) to make a NAS out of my Raspberry Pi 3B+, to which I simply attached a HDD.</p>
<p><img alt="Screenshot" src="../img/omv.png" />
<em>Above: Screenshot of my OMV Dashboard</em></p>
<h2 id="preparations">Preparations</h2>
<ul>
<li>Install Raspberry Pi OS Lite</li>
<li>Install OMV using the <a href="https://github.com/OpenMediaVault-Plugin-Developers/installScript/raw/master/install" target="_blank">installation script.</a></li>
<li>Wipe the drive(s) you wish to connect to your Pi. I did it like this:<ul>
<li>Connect drive to PC, find out the device name by using <code>sudo fdisk -l</code> or <code>lsblk</code></li>
<li>Use dd command to write zeros to the drive: <code>sudo dd if=/dev/zero of=/dev/sbdX bs=5M status=progress</code></li>
</ul>
</li>
<li>Log onto the OMV Web GUI with the default <code>admin</code> user and <code>openmediavault</code> password, then change them and setup a new user
Make sure to put that user in the <code>SSH</code> group in the <code>Users</code> Tab, to ensure SSH connectivity</li>
<li>I installed the <code>openmediavault-sharerootfs</code> plugin, to be able to share folders located on the root filesystem</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will still only be able to manage your disks, shares etc. with the admin user</p>
</div>
<ul>
<li>Check if disk is found under <code>Storage &gt; Disks</code></li>
<li>Create and mount a file system on that disk under <code>Storage &gt; File Systems</code> - I used ext4</li>
</ul>
<h2 id="smb-share-setup">SMB Share Setup</h2>
<ul>
<li>Create a folder on the disk under <code>Storage - Shared Folders</code></li>
<li>Make the SMB share browseable and configure other settings like minimum SMB version and permission inheritance under <code>Services &gt; SMB/CIFS &gt; Settings</code></li>
<li>Create the SMB Share in <code>Services &gt; SMB/CIFS &gt; Shares</code></li>
<li>Then add the share as a network drive in Windows, using the user credentials created before</li>
</ul>
<h2 id="iscsi-lun-setup">iSCSI LUN Setup</h2>
<ul>
<li>Install the <code>openmediavault-tgt</code> plugin</li>
<li>Go to <code>Services &gt; tgt &gt; Settings &gt; Check "Enable"</code></li>
</ul>
<h3 id="create-an-iscsi-image">Create an iSCSI image</h3>
<p>There's two ways of doing this, by terminal or in the Web GUI.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Terminal</label><label for="__tabbed_1_2">GUI</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Connect to the terminal locally or via SSH, and make a directory for the image, eg. <code>sudo mkdir /iscsiimg</code>, then use dd to make the empty image: <code>sudo dd if=/dev/zero of=/iscsiimg/lun1.img bs=1M count=5120</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don't forget the <code>count</code> parameter, to only make an image of your desired size (it counts blocks of the size specified in the <code>bs</code> parameter). Otherwise <code>dd</code> will copy an infinite stream of zeroes and wipe everything else out.</p>
</div>
</div>
<div class="tabbed-block">
<p>Go to <code>Services &gt; tgt &gt; Images</code> and click "Create", then enter the full path you want the image to have, eg. "/iscisimg.lun1.img".</p>
</div>
</div>
</div>
<h3 id="create-an-iscsi-target">Create an iSCSI Target</h3>
<p>Go to <code>Services &gt; tgt &gt; Targets</code> and configure a target, with the image you just created as 'Backing Store'. As initiator I used my laptop and entered its hostname.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You also need to check the "Enabled" box for each target, otherwise it won't be found by the initiator.</p>
</div>
<h3 id="on-the-initiator">On the initiator:</h3>
<ul>
<li>Install package <code>open-iscsi</code></li>
<li>Start iSCSI daemon with <code>sudo systemctl start iscsid</code>, if you want it to start on system startup automatically use <code>sudo systemctl enable iscsid</code></li>
<li>Discover the iSCSI target: run <code>sudo iscsiadm -m discovery -t st -p &lt;OMV IP Adress&gt;</code></li>
<li>Login using command <code>sudo iscsiadm -m node -T &lt;ISCSI Target IQN&gt; -p &lt;OMV IP Adress&gt; --login</code>. You can find the target's IQN in the OMV web GUI in the <code>tgt &gt; Targets</code> page next to the name of the target you just created.</li>
<li>Use the command <code>lsblk</code> to see the device name the LUN has on your system.</li>
<li>Create a directory and then mount the LUN to it (<code>sudo mkdir /mnt/iscsi</code>, then <code>sudo mnt /dev/sdX /mnt/iscsi</code>)</li>
<li>I got an error saying the image has the 'wrong fs type', as it has no filesystem configured, so I simply used <code>sudo mkfs -t ext4 /dev/sdX</code> to give it an ext4 filesystem</li>
<li>You can now put files here. You can logout with <code>sudo iscsiadm -m node -T &lt;ISCSI Target IQN&gt; -p &lt;OMV IP Adress&gt; --logout</code>, and also just unmount and mount the LUN if you wish.</li>
</ul>
<h2 id="samba">Samba</h2>
<p>I also created a Samba Share on my Raspberry Pi for my home network.
To do this, install the packages <code>samba samba-common smbclient</code> and make a backup of the <code>/etc/samba/smb.conf</code> file, then create a new one with your custom entries.
Mine simply looks like this:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>[global]
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>workgroup = WORKGROUP
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>security = user
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>client min protocol = SMB2
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>client max protocol = SMB3
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>map to guest = Bad User
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>guest account = nobody
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>[Samba]
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>path = /mnt/sambavolume
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>read only = no
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>guest ok = yes
</code></pre></div>
This gives me the Share 'Samba'. Guest accounts are allowed, so no login is needed. The standard guest account is the Unix user 'nobody'. To ensure that everyone has permissions to the share, you also need to set them for the directory: <code>sudo chmod 777 /mnt/sambavolume</code>. If you want to only enable access for certain users, don't enable guest access in the configuration file and instead set the <code>valid users =</code> option for the samba share. Then use <code>sudo smbpasswd -a &lt;user&gt;</code> to set login credentials to the share for the user.</p>
<h3 id="creating-a-logical-volume-for-the-samba-file-share">Creating a logical volume for the Samba file share</h3>
<p>I wanted to set a size restriction for the Samba file share, so I decided to map it to a logical volume.
You can map the Samba file share to any directory you want using the <code>path =</code> option.
To map it to a logical volume, I connected my Pi to an external SDD and did the follwing:</p>
<ul>
<li>install <code>lvm2</code> package</li>
<li>use the <code>lsblk</code> command to find out the name of the SDD block device and create a physical volume on it using <code>sudo pvcreate /dev/sda</code></li>
<li>create a volume group on the phyiscal volume: <code>vgcreate volgroup1 /dev/sda</code></li>
<li>create the logical volume: <code>sudo lvcreate -L 250G volgroup1 -n sambavolume</code>. Now I have a 250 GiB volume called 'sambavolume'</li>
<li>create ext4 filesystem on the volume: <code>mkfs.ext4 /dev/mapper/volgroup1-sambavolume</code> (as a logical volume is not a regular block device, all logical volumes are found under <code>/dev/mapper</code>. <code>/dev/mapper/volgroup1-sambavolume</code> is the full path to my sambavolume.)</li>
<li><code>sudo mkdir -p /mnt/sambavolume</code> and <code>sudo mount /dev/mapper/volgroup1-sambavolume /mnt/sambavolume</code> to mount the logical volume.</li>
<li>to make persistent after reboots, I added an entry for the volume to <code>/etc/fstab</code>: <code>/dev/mapper/volgroup1-sambavolume /mnt/sambavolume ext4 defaults 0 2</code></li>
</ul>
<h3 id="connecting-to-the-share-from-windows-devices">Connecting to the share from Windows devices</h3>
<p>To connect to the share using Windows devices, simply enter <code>\\&lt;serverIP&gt;\&lt;sambasharename&gt;</code> in the file explorer or map as new network device.
So in my case, <code>\\cutiepi\samba</code>. You are now automatically connected to whatever directory is specified as 'path' in the smb.conf file for this share.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/witchessabath" target="_blank" rel="noopener">Lily Sabath</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.expand", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>